title:	Add: Test coverage for critical API services with 0% coverage
state:	OPEN
author:	baldawsari
labels:	enhancement, high-priority, testing
comments:	0
assignees:	
projects:	
milestone:	
number:	6
--
## Enhancement Request
Multiple critical API services and routes currently have 0% test coverage, representing significant risk to application stability and reliability.

### Current State
Based on testing analysis, the following critical components have **0% test coverage**:

#### Services Without Tests
1. **`claudeService.js`** - AI course generation service
   - Handles all Claude AI API interactions
   - Methods: `generateCourseStructure()`, `generateSessionDetails()`, `generateAssessments()`, `generateActivities()`
   - Includes retry logic, caching, and usage tracking

2. **`documentProcessor.js`** - Document processing pipeline
   - Critical for RAG pipeline functionality
   - Handles document chunking and text extraction

3. **`jinaClient.js`** - Embedding and reranking service
   - Manages all Jina AI API interactions
   - Essential for vector search functionality

4. **`vectorService.js`** - Vector database operations
   - Manages Qdrant vector database interactions
   - Core component of the RAG pipeline

5. **`pdfGenerator.js`** & **`htmlExporter.js`** - Export functionality
   - Generate PDF and HTML exports of courses

#### API Routes Without Tests
1. **`courses.js`** - 16 endpoints for course management
2. **`export.js`** - 10 endpoints for export functionality
3. **`generation.js`** - Course generation endpoints

### Proposed Improvement
Implement comprehensive test suites for each service and route, following the existing testing patterns in the codebase.

### Benefits
- **Risk Reduction**: Prevent regressions in critical business logic
- **API Cost Protection**: Test external API integrations to avoid unnecessary costs
- **Confidence**: Enable safer refactoring and feature development
- **Quality Assurance**: Ensure consistent behavior across deployments

### Acceptance Criteria
- [ ] Create test suite for `claudeService.js` with mocked Claude API responses
- [ ] Create test suite for `documentProcessor.js` covering all chunking scenarios
- [ ] Create test suite for `jinaClient.js` with mocked Jina API responses
- [ ] Create test suite for `vectorService.js` with mocked Qdrant operations
- [ ] Create test suite for export services (PDF/HTML)
- [ ] Create integration tests for all course routes
- [ ] Create integration tests for all export routes
- [ ] Achieve minimum 80% coverage for each service
- [ ] Add performance benchmarks for vector operations

### Priority
**High** - These services handle core business functionality and expensive external API calls.

### Technical Notes
- Use existing test patterns from `userService.test.js` and `authService.test.js`
- Mock external services (Claude, Jina, Qdrant) to avoid API costs in tests
- Follow the testing guidelines in `docs/TESTING.md`
