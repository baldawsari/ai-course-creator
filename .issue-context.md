title:	Add: Test coverage for frontend API services and WebSocket client (0% coverage)
state:	OPEN
author:	baldawsari
labels:	enhancement, frontend, high-priority, testing
comments:	0
assignees:	
projects:	
milestone:	
number:	7
--
## Enhancement Request
Critical frontend API infrastructure has 0% or very low test coverage, affecting reliability of data fetching, real-time features, and error handling.

### Current State
Based on frontend testing analysis, the following API-related components have **0% or critically low test coverage**:

#### Components with 0% Coverage
1. **`websocket/client.ts`** (0% - 0/147 lines)
   - Real-time collaboration WebSocket client
   - Socket.io integration with auto-reconnection
   - User presence tracking
   - Collaborative editing events
   - Offline queue management
   - Course-specific collaboration features

#### Components with Critical Gaps
2. **`api/client.ts`** (39.4% - Critical methods at 0%)
   - Token refresh logic - 0% coverage
   - File upload methods - 0% coverage
   - File download methods - 0% coverage
   - Error transformation - partial coverage
   - Health check functionality - 0% coverage

3. **`api/endpoints.ts`** (37.8% - Many endpoints at 0%)
   - Authentication endpoints (forgot/reset password) - 0% coverage
   - Document processing endpoints - 0% coverage
   - Export endpoints (PDF, PPT, bundle) - 0% coverage
   - Job management endpoints - 0% coverage
   - WebSocket subscription - 0% coverage

4. **`query-client.ts`** (25% - Utilities at 0%)
   - Error retry logic - 0% coverage
   - Cache invalidation utilities - 0% coverage
   - Prefetch utilities - 0% coverage
   - Background sync utilities - 0% coverage
   - Performance monitoring - 0% coverage

5. **`hooks/use-api.ts`** (Partial - Many hooks untested)
   - Document upload hooks - 0% coverage
   - Export hooks - 0% coverage
   - Job subscription hooks - 0% coverage
   - Bulk operation hooks - 0% coverage

### Proposed Improvement
Implement comprehensive test suites for each API service, focusing on:
- Network request mocking
- Error scenario testing
- Authentication flow validation
- WebSocket lifecycle testing
- Cache behavior verification
- File operation progress tracking

### Benefits
- **Reliability**: Ensure consistent API communication
- **Real-time Features**: Validate WebSocket stability
- **Error Resilience**: Test retry and recovery mechanisms
- **Performance**: Verify cache optimization
- **User Experience**: Ensure smooth file uploads/downloads

### Acceptance Criteria
- [ ] Create test suite for WebSocket client covering connection lifecycle
- [ ] Test auto-reconnection and offline queue functionality
- [ ] Create comprehensive tests for API client methods
- [ ] Test token refresh flow with various scenarios
- [ ] Test file upload/download with progress tracking
- [ ] Create tests for all API endpoint functions
- [ ] Test error handling and transformation
- [ ] Create tests for query client utilities
- [ ] Test cache invalidation strategies
- [ ] Add tests for all custom API hooks
- [ ] Mock Socket.io for WebSocket tests
- [ ] Mock fetch/axios for HTTP tests
- [ ] Achieve minimum 80% coverage for each file

### Priority
**High** - These components are fundamental to all data operations and user interactions in the frontend.

### Technical Notes
- Use React Testing Library with MSW for API mocking
- Follow existing patterns from tested hooks
- Mock Socket.io client for WebSocket tests
- Test both success and failure scenarios
- Include tests for race conditions and edge cases
- Reference `docs/TESTING-FRONTEND.md` for testing guidelines

### Related Issues
- #6 - Backend API services test coverage
